# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/core.ipynb.

# %% ../nbs/core.ipynb 2
from __future__ import annotations

import aiohttp

# %% auto 0
__all__ = ['send_http_request']

# %% ../nbs/core.ipynb 5
async def send_http_request(method:str, # HTTP method: GET, POST, DELETE, PUT.
                            url:str, # Request URL.
                            headers:dict|None=None, # HTTP headers.
                            params:dict|None=None, # a.
                            data:dict|str|None=None, # b.
                            json:dict|None=None, # c.
                            proxy:str|None=None, # d.
                            auth:aiohttp.BasicAuth|None=None, # e.
                            text:bool=False, # Return string? If not, return dict.
                            ) -> str|dict: # HTML string or JSON dict.
    "Asynchronously send a HTTP request with a new session and return the response."
    async with aiohttp.ClientSession(
        headers=headers,
        auth=auth,
    ) as session:
        methods = {
            'GET': session.get,
            'POST': session.post,
            'DELETE': session.delete,
            'PUT': session.put,
        }
        request = methods.get(
            method,
            session.get,
        )
        async with request(
            url,
            params=params,
            data=data,
            json=json,
            proxy=proxy,
        ) as response:
            if text:
                return await response.text()
            else:
                return await response.json()
